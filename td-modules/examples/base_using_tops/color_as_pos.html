<!DOCTYPE html>
<html>
<head>    
    <link rel="stylesheet" href="../../../assets/styles.css">
</head>
<body>

<h1>Techniques Using TOPs</h1>
<h2>Color as Position</h2>
<hr>

<p>
    A recent feature in the 099 version of TouchDesigner is the ability to now drive instances with <a href="https://docs.derivative.ca/TOP">TOPs</a>. There’s lots of very exciting things we can do with this feature, but before we get too far along it’s worth having a solid understanding of what’s driving the magic in this new feature.
    <br><br>
    First and foremost, it’s important for us to start to think of a pixel as being a coordinate. Just like we might use pixels to create an image with color, we can use that same idea of color- red, green, blue - to translate to location - x, y, and z. When we’re working with TOPs for instancing, our color information is our location information (mostly, but not always). 
    <br><br>
    We’ll also likely want to work with a higher <a href="https://etc.usf.edu/techease/win/images/what-is-bit-depth/"> bit depth</a> for our TOPs. We’ll want to use a higher bit depth in part because we’ll get smoother motion, and reduced stepping in our instances. We’ll also be able to more easily work with negative values - when working with images this isn’t as important, but for pixels as positions we’ll need to have negative values stored in our TOPs.
    <br><br>
    If you’ve never set your TOPs to have a different bit depth you can do this from the common page:
    <br><br>
<img src="../../../assets/imgs/using-tops/color-as-pos/color-as-pos-01.gif">
    <br><br>
    In this example we’ll use a simple <a href="https://etc.usf.edu/techease/win/images/what-is-bit-depth/"> Ramp TOP</a> to get our bearings. The idea here is that our ramp represents our x positions for our instances. The number of pixels is going to determine our number of instances. Next we’ll use a <a href="https://docs.derivative.ca/Reorder_TOP"> Reorder TOP</a> to re-arrange our data a little bit. Here we’ll use our Ramp to define our red channel (or x), and a constant to define our green and blue channels (y and z).
    <br><br>
    We’ll then use a math TOP to change the range these values from being 0 to 1 to being in a range of -1 to 1. A <a href="https://docs.derivative.ca/TOP_to_CHOP"> TOP to CHOP</a> helps us quickly confirm that our values are what we expect. 
    <br><br>
<img src="../../../assets/imgs/using-tops/color-as-pos/color-as-pos-02.jpg">
    <br><br>
    Finally, we can hook this up to our geometry COMP and we should see a simple row of instances.
    <br><br>
    This isn’t too exciting yet, but it’s the foundational elements we’ll need to really start to play with these ideas a little more.

</p>

<hr>

<br>

<footer>
Tested in TouchDesigner099 2020.23680 <br>
Updated 05.28.20 <br>
Matthew Ragan <br>
Zoe Sandoval
</footer>

</body>
</html> 